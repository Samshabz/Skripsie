

\section*{Global Matchers}

Global matchers are defined as matching techniques which take the entire image as context. They vary widely in their computational efficiency and accuracy. That is, some aim to infer the rotation and translation of the image, while others aim to quickly find the most similar image. In our context, global matchers will be used for the latter purpose. Note that while they can be used for the former purpose, because they take the entire image as context, they are highly noise sensitive, and have widely different performances for different datasets and parameters. 


There are significant amounts of global matching techniques, however, to maintain scope, I will only focus on global matchers that meet the following criteria:



\begin{itemize}
    \item Computationally efficient on a CPU. More specifically, the method shall take less than 1 second to compare at least 10 images. 
    \item Initial tests, which are not shown, show the matcher to be reasonably effective at the given problem after sufficient optimization.
    \item The technique must not require any pre- or live-training.
    \item The entire image context must be both evenly captured and weighted. 





\subsection*{Local detectors and matcher conversion techniques}
Retrofitting local matching techniques to a global matching context involves computing the similarity using the amount of good matches between images. However, this method has two issues in addition to its high computational cost. Firstly, it does not inherently find features evenly across the entire image, leading to loss of full context. Secondly, each patch can have different feature densities leading to asymmetrical position weighting. To combat this, patch or grid matching is used, and the amount of matches per patch is set well below the mean amount of expected matches per patch to ensure thorough and even feature finding across the images. This method is computationally expensive, but it is the most accurate and most robust to distortions and noise. Tests will be conducted on ORB and AKAZE with BF, FLANN AND GRAPH matchers. Machine learning-based models do not have a potential to meet the time requirement, and therefore will not be tested.

The following methods below inherently require that images are rotationally aligned. Estimating the intra-image rotation is inherently erroneous and as such the following tests inherently account for the rotational invariance of the method. 

\subsection*{Cross-correlation}
Cross-correlation is a global matching technique that compares two images by sliding one over the other and computing the similarity at each position. 

\subsection*{Histograms}  
Histograms compare images by analyzing the distribution of pixel intensities, which represents how many pixels fall into different intensity levels. This method focuses on global color and brightness information.

\subsection*{SSIM (Structural Similarity Index)}  
SSIM compares images based on luminance, contrast, and structural information. 

\subsection*{Phase Correlation}
Phase correlation is a global matching technique that compares images by analyzing the phase difference between the Fourier transforms of the images.

\subsection*{Hashing}
Hashing is a global matching technique that compares images by computing a hash value for each image and comparing the hash values.



\section*{Results}
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: Cross Correlation, Local Detector: AKAZE, Local Matcher: BF

ON CPTSET

\subsection*{Local}

Percentage Deviation: [0.31225962] \%
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: Same as Global Matcher, Local Detector: AKAZE, Local Matcher: BF
Mean normalized GPS error: [4.10924432]
 Mean Heading Error: 0.01402104774480506

\subsection*{Cross-correlation}
Percentage Deviation: [0.6647988] \%
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: Cross Correlation, Local Detector: AKAZE, Local Matcher: BF
Mean normalized GPS error: [8.02045142]
 Mean Heading Error: 0.010777802670986603


\subsection*{Histograms}
Percentage Deviation: [0.6647988] \%
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: Histogram, Local Detector: AKAZE, Local Matcher: BF
Mean normalized GPS error: [8.02045142]
 Mean Heading Error: 0.010777802670986603


\subsection*{SSIM}
Percentage Deviation: [0.602858] \%
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: SSIM, Local Detector: AKAZE, Local Matcher: BF
Mean normalized GPS error: [7.37591842]
 Mean Heading Error: 0.012741519218860731


 ON ROTSET
 LOCAL
Percentage Deviation: [4.02463161] \%
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: Same as Global Matcher, Local Detector: AKAZE, Local Matcher: BF
Mean normalized GPS error: [52.81922868]
Mean Heading Error: 0.8321993766400311



\subsubsection*{Cross-correlation}
Percentage Deviation: [6.1435566] \%
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: Cross Correlation, Local Detector: AKAZE, Local Matcher: BF
Mean normalized GPS error: [88.10290814]
 Mean Heading Error: 1.0255152627187532
Time taken to execute The Method: 49.9806 seconds

Stability analysis mean (relative to src - best result) and var*1000
Phase Correlation stability: 1.346 +/- 338.755
Linear Algebra stability: 1.000 +/- 3166.574
Affine stability: 2.862 +/- 87422.270
Rigid stability: 2.858 +/- 79133.710
Homography stability: 2.887 +/- 83390.184

\subsubsection*{Histograms}
Phase Correlation stability: 1.388 +/- 329.804
Linear Algebra stability: 1.000 +/- 2900.437
Affine stability: 3.374 +/- 85646.633
Rigid stability: 3.062 +/- 106080.070
Homography stability: 3.400 +/- 82223.348

Percentage Deviation: [5.19037757] \%
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: Histogram, Local Detector: AKAZE, Local Matcher: BF
Mean normalized GPS error: [70.54073714]
 Mean Heading Error: 0.9488659512725632
Time taken to execute The Method: 46.9889 seconds

\subsubsection*{SSIM}
Percentage Deviation: [5.23976611]\%
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: SSIM, Local Detector: AKAZE, Local Matcher: BF
Mean normalized GPS error: [71.04284132]
 Mean Heading Error: 0.9958768512848991

 Phase Correlation stability: 1.357 +/- 333.593
Linear Algebra stability: 1.000 +/- 4440.838
Affine stability: 2.712 +/- 85546.679
Rigid stability: 3.318 +/- 87038.503
Homography stability: 2.721 +/- 84266.185
stability far-off

\subsubsection*{Hashing}
Phase Correlation stability: 1.120 +/- 1926.792
Linear Algebra stability: 1.000 +/- 4183.729
Affine stability: 2.458 +/- 123532.915
Rigid stability: 2.831 +/- 90554.234
Homography stability: 2.468 +/- 123256.348

Percentage Deviation: [60.15177095] %
Preprocessing Global Detector: AKAZE, Preprocessing Global Matcher: BF, Global Matching Technique: Hash, Local Detector: AKAZE, Local Matcher: BF
Mean normalized GPS error: [1243.77607188]
 Mean Heading Error: 1.1050056390247618
Time taken to execute The Method: 59.0546 seconds


\subsection*{Complex Issue}
Mean Heading Error: 0.9488659512725632 - this is for histograms, the stability of non-phase methods are severely off. Poor stability except for phase-correlation



XXX - mention these are at high loads ie multi-method simultaneous testing - times are relative. 